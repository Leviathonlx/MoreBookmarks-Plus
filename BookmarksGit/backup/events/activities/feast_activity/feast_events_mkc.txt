namespace = feast_mkc

feast_mkc.0001 = {
	type = activity_event
	title = feast_mkc.0001.t
	desc = feast_mkc.0001.desc
	theme = feast_activity

	left_portrait = {
		character = ROOT
		animation = thinking
		camera = camera_event_very_left
	}
	right_portrait = {
		character = scope:guest_lost_loved_pet
		animation = sadness
		camera = camera_event_very_right
	}

	cooldown = { years = 10 }
	
	trigger = {
		has_named_cat_trigger = yes
		scope:activity = {
			any_attending_character = { 
				NOT = { ROOT = this }
				any_memory = {
					has_memory_type = cat_died
				}
			}
		}
	}

	immediate = {
		scope:activity = {
			random_attending_character = {
				limit = {
					NOT = { ROOT = this }
					any_memory = { has_memory_type = cat_died }
				}
				save_scope_as = guest_lost_loved_pet
			}
		}
		random_owned_story = {
			limit = {
				story_type = story_cycle_pet_cat
			}
			save_scope_as = pet_cat_story
		}
	}
	
	option = {
		name = feast_mkc.0001.a

		scope:guest_lost_loved_pet = {
			stress_impact = {
				base = medium_stress_impact_loss
			}
			add_opinion = {
				modifier = feast_helped_overcome_loss_opinion
				target = root
			}
			hidden_effect = {
				reverse_add_opinion = {
					modifier = feast_sympathy_over_loss_opinion
					target = root
				}
			}
		}

		stress_impact = {
			compassionate = minor_stress_impact_loss
		}
	}

	option = {
		name = feast_mkc.0001.b


		scope:guest_lost_loved_pet = {
			stress_impact = {
				base = minor_stress_impact_loss
			}
		}
		custom_tooltip = bonus_to_petting_pet_tt

		hidden_effect = {
			scope:pet_cat_story = {
				set_variable = {
					name = bonus_to_petting_pet
				}
			}
		}
	}
}
