##########################
# GOVERNOR CONTRACT EVENTS
##########################
namespace = governor_contract_events_tova

### Unsanctioned Local deity
# Intro event
governor_contract_events_tova.0050 = {
	type = character_event
	title = governor_contract_events_tova.0050.t
	window = big_event_window
	desc = governor_contract_events_tova.0050.desc
	theme = administrative
	left_portrait = {
		character = root
		animation = thinking
	}

	immediate = {
		scope:task_contract = {
			# Save the location
			task_contract_location = {
				save_scope_as = deity_destination
			}
		}
	}

	option = {
		name = governor_contract_events_tova.0050.a

		custom_tooltip = governor_contract_events_tova.0050.a.tt
		governor_contract_travel_or_progress_effect = {
			DESTINATION = scope:deity_destination
			ARRIVAL_EVENT = governor_contract_events_tova.0051
		}
		
		ai_chance = {
			base = 100
		}
	}

	option = {
		name = governor_contract_events_tova.0050.b
		scope:task_contract = {
			complete_task_contract = failure_standard
		}
		
		ai_chance = {
			base = 0
			
			modifier = {
				add = 100
				is_available = no
			}
			modifier = {
				add = 200
				has_trait = lazy
				NOT = { has_trait = greedy } # Greedy always wants more gold, even when lazy.
			}
		}
	}
}

# Arrival at village location
governor_contract_events_tova.0051 = {
	type = character_event
	title = governor_contract_events_tova.0050.t
	window = big_event_window
	desc = governor_contract_events_tova.0051.desc
	theme = administrative
	override_background = { reference = market }
	left_portrait = {
		character = root
		animation = disapproval
	}

	right_portrait = {
		character = scope:worshipper
		animation = beg
		hide_info = yes
	}

	immediate = {
		hidden_effect = {
			current_travel_plan ?= { pause_travel_plan = yes }
		}
		if = {
			limit = {
				any_pool_character = {
					province = scope:task_contract.task_contract_location
					is_physically_able_ai_adult = yes
				}
			}
			random_pool_character = {
				province = scope:task_contract.task_contract_location
				limit = { is_physically_able_ai_adult = yes }
				save_scope_as = worshipper
			}
		}
		else = {
			create_character = {
				template = generic_peasant_character
				location = root.location
				save_scope_as = worshipper
			}			
		}
		generate_governance_outcome_effect = { OPTIONS = 5 }
	}

	option = { # Sanction deity - Special governor trait option
		name = governor_contract_events_tova.0051.a
		trigger = {
			has_trait = governor # To show that the trait unlocks the option
			exists = scope:governance_option_a
		}
		scope:task_contract = {
			complete_task_contract = sanction_deity
		}
		ai_chance = {
			base = 200
		}
	}

	option = { # Break up the worshippers and burn the shrine!
		name = governor_contract_events_tova.0051.b
		trigger = { exists = scope:governance_option_b }
		duel = {
			skill = martial
			value = decent_skill_rating
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0051_duel
					value = flag:burn_shrine
				}
				trigger_event = governor_contract_events_tova.0052
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = burn_shrine
					}
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0051_duel
					value = flag:burn_shrine
				}
				trigger_event = governor_contract_events_tova.0053
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = failure_standard
					}
				}
			}
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_vengefulness = 1
			}
		}
	}
	option = { # Steal the deity's offerings
		name = governor_contract_events_tova.0051.c
		trigger = { exists = scope:governance_option_c }
		scope:task_contract = {
			complete_task_contract = claim_offerings
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = 1
			}
		}
	}
	option = { # Debunk deity
		name = governor_contract_events_tova.0051.d
		trigger = { exists = scope:governance_option_d }
		duel = {
			skill = learning
			target = root
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0051_duel
					value = flag:debunk_deity
				}
				trigger_event = governor_contract_events_tova.0052
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = debunk_deity
					}
				}
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0051_duel
					value = flag:debunk_deity
				}
				trigger_event = governor_contract_events_tova.0053
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = failure_standard
					}
				}
			}
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
		}
	}
	option = { # The monks can handle this.
		name = governor_contract_events_tova.0051.e
		trigger = { exists = scope:governance_option_e }
		scope:task_contract = {
			complete_task_contract = deity_monks
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = 1
			}
		}		
	}
	after = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						exists = scope:governor_contract_events_tova_0051_duel
					}
				}
				current_travel_plan ?= { resume_travel_plan = yes }
			}
			scope:worshipper = {
				if = {
					limit = { is_pool_character = no }
					silent_disappearance_effect = yes
				}
			}
		}
	}
}

# Success event
governor_contract_events_tova.0052 = {
	type = character_event
	title = governor_contract_events_tova.0050.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0051_duel ?= flag:burn_shrine
				}
				desc = governor_contract_events_tova.0052.desc_burn
			}
			desc = governor_contract_events_tova.0052.desc_debunk
		}
	}
	theme = administrative
	override_background = { reference = market }
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0056_duel ?= flag:debunk_deity
			}
			animation = happiness
		}
		triggered_animation = {
			trigger = { always = yes }
			animation = sword_coup_degrace
		}
	}

	option = {
		name = governor_contract_events_tova.0052.a
		scope:task_contract = {
			if = {
				limit = {
					scope:governor_contract_events_tova_0051_duel ?= flag:burn_shrine
				}
				complete_task_contract = burn_shrine
			}
			else_if = {
				limit = {
					scope:governor_contract_events_tova_0051_duel ?= flag:debunk_deity
				}
				complete_task_contract = debunk_deity
			}
		}
	}
	after = {
		hidden_effect = {
			current_travel_plan ?= { resume_travel_plan = yes }
		}
	}
}

# Failure event
governor_contract_events_tova.0053 = {
	type = character_event
	title = governor_contract_events_tova.0050.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0051_duel ?= flag:burn_shrine
				}
				desc = governor_contract_events_tova.0053.desc_burn
			}
			desc = governor_contract_events_tova.0053.desc_debunk
		}
	}
	theme = administrative
	override_background = { reference = market }
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0056_duel ?= flag:escapee_persuade
			}
			animation = disappointed
		}
		triggered_animation = {
			trigger = { always = yes }
			animation = shock
		}
	}

	option = {
		name = governor_contract_events_tova.0053.a
		scope:task_contract = {
			complete_task_contract = failure_standard
		}
	}

	after = {
		hidden_effect = {
			current_travel_plan ?= { resume_travel_plan = yes }
		}
	}
}

### Escaped Justice
# Intro event
governor_contract_events_tova.0055 = {
	type = character_event
	title = governor_contract_events_tova.0055.t
	window = big_event_window
	desc = governor_contract_events_tova.0055.desc
	theme = administrative
	override_background = { reference = study }
	left_portrait = {
		character = root
		animation = reading
	}
	lower_right_portrait = {
		character = scope:escapee
	}
	
	immediate = {
		# Save the contract
		random_character_active_contract = {
			limit = {
				has_task_contract_type = escaped_justice
			}
			save_scope_as = ongoing_contract
		}
		scope:task_contract = {
			# Save the location
			task_contract_location = {
				save_scope_as = escapee_destination
			}
		}
		# Save the escapee
		scope:task_contract.task_contract_target = { save_scope_as = escapee}
		hidden_effect = {
			scope:escapee = {
				set_location = {
					location = scope:escapee_destination
					stick_to_location = yes
				}
			}
		}
		# Save their bodyguard
		create_character = {
			template = new_warrior_character
			location = root.location
			faith = scope:escapee.faith
			culture = scope:escapee.culture
			gender_female_chance = {
				if = {
					limit = {
						scope:escapee = { is_female = yes }
					}
					value = 100
				}
				else = { value = 0 }
			}
			save_scope_as = thug
			after_creation = {
				add_character_flag = created
			}
		}
	}

	option = { # I must go there at once!
		name = governor_contract_events_tova.0050.a

		custom_tooltip = governor_contract_events_tova.0055.a.tt
		governor_contract_travel_or_progress_effect = {
			DESTINATION = scope:escapee_destination
			ARRIVAL_EVENT = governor_contract_events_tova.0056
		}
		
		ai_chance = {
			base = 100
		}
	}

	option = { # That vile rat will show its face eventually...
		name = governor_contract_events_tova.0055.b
		scope:task_contract = {
			complete_task_contract = failure_standard
		}
		
		ai_chance = {
			base = 0
			
			modifier = {
				add = 100
				is_available = no
			}
			modifier = {
				factor = 0
				has_trait = lazy
			}
		}
	}
	
	after = {
		scope:thug = {
			silent_disappearance_ai_if_created_effect = yes
		}
	}
}

# Arrive at village
governor_contract_events_tova.0056 = {
	type = character_event
	title = governor_contract_events_tova.0055.t
	window = big_event_window
	desc = governor_contract_events_tova.0056.desc
	theme = administrative
	override_background = {
		trigger = {
			root.location = {
				terrain = forest
			}
		}
		reference = ep2_hunt_forest_hut
	}
	override_background = {
		trigger = {
			root.location = { graphical_hills_trigger = yes }
		}
		reference = ep2_travel_settlement_hills
	}
	override_background = {
		trigger = {
			root.location = { terrain = farmlands }
		}
		reference = ep2_travel_settlement_farm
	}
	left_portrait = {
		camera = camera_event_scheme_vs_right_look_right
		character = root
		animation = survey
	}
	right_portrait = {
		camera = camera_event_scheme_vs_left_look_left
		character = scope:thug
		animation = hunting_shortbow_aim_arrow_default
	}

	immediate = {
		hidden_effect = {
			current_travel_plan ?= { pause_travel_plan = yes }
		}

		generate_governance_outcome_effect = { OPTIONS = 4 }
	}

	option = { # Convince the escapee to face justice
		name = governor_contract_events_tova.0056.a

		trigger = { exists = scope:governance_option_a }
		duel = {
			skill = diplomacy
			target = scope:escapee
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = escapee_persuade
					}
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0056_duel
					value = flag:escapee_persuade
				}
				rightfully_imprison_character_less_verbose_effect = {
					TARGET = scope:escapee
					IMPRISONER = scope:task_contract.task_contract_taker
				}
				trigger_event = governor_contract_events_tova.0057
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0056_duel
					value = flag:escapee_persuade
				}
				trigger_event = governor_contract_events_tova.0058
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = failure_standard
					}
				}
			}
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
		}
	}

	option = { # Put the coward and his men to the sword
		name = governor_contract_events_tova.0056.b

		trigger = { exists = scope:governance_option_b }
		duel = {
			skill = martial
			target = scope:escapee
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = escapee_slain
					}
				}
				scope:escapee = {
					death = { 
						death_reason = death_execution 
						killer = root 
					}
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0056_duel
					value = flag:escapee_slain
				}
				trigger_event = governor_contract_events_tova.0057
			}
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0056_duel
					value = flag:escapee_slain
				}
				trigger_event = governor_contract_events_tova.0058
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = failure_standard
					}
				}
			}
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_vengefulness = 1
			}
		}
	}

	option = { # Send them an offer to join a monastery.
		name = governor_contract_events_tova.0056.c

		trigger = { exists = scope:governance_option_c }
		
		
		simplified_clergy_effect = { RECIPIENT = scope:escapee }
		
		scope:task_contract = {
			complete_task_contract = escapee_join_monastery
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = 1
			}
		}
	}

	option = { # Banish them.
		name = governor_contract_events_tova.0056.d

		trigger = { exists = scope:governance_option_d }
		scope:escapee = {
        	create_landless_adventurer_title_effect = {
        	    REASON = flag:exile
        	    FLAVOR_CHAR = root
        	}
		}
		scope:task_contract = {
			complete_task_contract = escapee_shunned
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = 1
			}
		}
	}

	after = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						exists = scope:governor_contract_events_tova_0056_duel
					}
				}
				current_travel_plan ?= { resume_travel_plan = yes }
			}
		}
	}
}

# Success event
governor_contract_events_tova.0057 = {
	type = character_event
	title = governor_contract_events_tova.0050.t
	window = big_event_window
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0056_duel ?= flag:escapee_persuade
				}
				desc = governor_contract_events_tova.0057.desc_persuade
			}
			desc = governor_contract_events_tova.0057.desc_slay
		}
	}
	theme = administrative
	override_background = {
		trigger = {
			root.location = {
				terrain = forest
			}
		}
		reference = ep2_hunt_forest_hut
	}
	override_background = {
		trigger = {
			root.location = { graphical_hills_trigger = yes }
		}
		reference = ep2_travel_settlement_hills
	}
	override_background = {
		trigger = {
			root.location = { terrain = farmlands }
		}
		reference = ep2_travel_settlement_farm
	}
	left_portrait = {
		character = root
		camera = camera_event_scheme_vs_right_look_right
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0056_duel ?= flag:escapee_persuade
			}
			animation = happiness
		}
		triggered_animation = {
			trigger = { always = yes }
			animation = sword_coup_degrace
		}
	}
	right_portrait = {
		camera = camera_event_scheme_vs_right_look_right
		character = scope:thug
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0056_duel ?= flag:escapee_persuade
			}
			animation = hunting_shortbow_rest_arrow_default
		}
		triggered_animation = {
			trigger = { always = yes }
			animation = loss_1
		}
	}

	option = {
		name = governor_contract_events_tova.0052.a
		scope:task_contract = {
			if = {
				limit = {
					scope:governor_contract_events_tova_0056_duel ?= flag:escapee_persuade
				}
				complete_task_contract = escapee_persuade
			}
			else_if = {
				limit = {
					scope:governor_contract_events_tova_0056_duel ?= flag:escapee_slain
				}
				complete_task_contract = escapee_slain
			}
		}
	}
	after = {
		hidden_effect = {
			current_travel_plan ?= { resume_travel_plan = yes }
		}
	}
}

# Failure event
governor_contract_events_tova.0058 = {
	type = character_event
	title = governor_contract_events_tova.0050.t
	window = big_event_window
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0056_duel ?= flag:escapee_persuade
				}
				desc = governor_contract_events_tova.0058.desc_persuade
			}
			desc = governor_contract_events_tova.0058.desc_slay
		}
	}
	theme = administrative
	override_background = {
		trigger = {
			root.location = {
				terrain = forest
			}
		}
		reference = ep2_hunt_forest_hut
	}
	override_background = {
		trigger = {
			root.location = { graphical_hills_trigger = yes }
		}
		reference = ep2_travel_settlement_hills
	}
	override_background = {
		trigger = {
			root.location = { terrain = farmlands }
		}
		reference = ep2_travel_settlement_farm
	}
	left_portrait = {
		character = root
		camera = camera_event_scheme_vs_right_look_right
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0056_duel ?= flag:escapee_persuade
			}
			animation = disappointed
		}
		triggered_animation = {
			trigger = { always = yes }
			animation = shock
		}
	}
	right_portrait = {
		camera = camera_event_scheme_vs_left_look_left
		character = scope:thug
		animation = hunting_shortbow_aim_arrow_default
	}

	option = {
		name = governor_contract_events_tova.0053.a
		scope:task_contract = {
			complete_task_contract = failure_standard
		}
	}
	after = {
		hidden_effect = {
			current_travel_plan ?= { resume_travel_plan = yes }
		}
	}
}

##Forced Conscription
governor_contract_events_tova.0060 = {
	type = character_event
	title = governor_contract_events_tova.0060.t
	window = big_event_window
	desc = governor_contract_events_tova.0060.desc
	theme = administrative
	left_portrait = {
		character = root
		animation = reading
	}
	override_background = { reference = study }

	immediate = {
		scope:task_contract = {
			# Save the location
			task_contract_location = {
				save_scope_as = conscript_destination
			}
		}
	}

	option = {
		name = governor_contract_events_tova.0060.a
		custom_tooltip = governor_contract_events_tova.0060.a.tt

		trigger_event = governor_contract_events_tova.0061
		ai_chance = {
			base = 100
		}
	}
	option = {
		name = governor_contract_events_tova.0060.b

		scope:task_contract = {
			complete_task_contract = failure_standard
		}

		ai_chance = {
			base = 0
			modifier = {
				add = 50
				has_trait = lazy
			}
		}
	}
}

#Make a decision
governor_contract_events_tova.0061 = {
	type = character_event
	title = governor_contract_events_tova.0060.t
	window = big_event_window
	desc = governor_contract_events_tova.0061.desc
	theme = administrative
	left_portrait = {
		character = root
		animation = reading
	}
	override_background = { reference = corridor_night }

	immediate = {}

	option = { # Convince them to join willingly.
		name = governor_contract_events_tova.0061.c
		trigger = {
			has_trait = confucian_education # To show that the trait unlocks the option
		}
		scope:task_contract = {
			complete_task_contract = conscripts_convinced
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
		}		
	}
	option = { # Pay the families recompense.
		name = governor_contract_events_tova.0061.a
		scope:task_contract = {
			complete_task_contract = conscripts_bribed
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = -1
			}
		}
	}
	option = { # Drag them forcibly from their homes!
		name = governor_contract_events_tova.0061.b
		scope:task_contract = {
			complete_task_contract = conscripts_forced
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_zeal = 1
			}
		}
	}
	option = { # Perhaps I can spare them, if there is a trade-off.
		name = governor_contract_events_tova.0061.d

		scope:task_contract = {
			complete_task_contract = conscripts_trade
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = 1
			}
		}
	}
}

### Teach Monks Martial Arts
# Intro event
governor_contract_events_tova.0065 = {
	type = character_event
	title = governor_contract_events_tova.0065.t
	window = big_event_window
	desc = governor_contract_events_tova.0065.desc
	theme = administrative
	override_background = { reference = study }
	left_portrait = {
		character = root
		animation = reading
	}
	
	immediate = {
		# Save the contract
		random_character_active_contract = {
			limit = {
				has_task_contract_type = combat_train_monks
			}
			save_scope_as = ongoing_contract
		}
		scope:task_contract = {
			# Save the location
			task_contract_location = {
				save_scope_as = monks_destination
			}
		}
	}

	option = { # I shall see what these monks are made of.
		name = governor_contract_events_tova.0065.a

		custom_tooltip = governor_contract_events_tova.0065.a.tt
		governor_contract_travel_or_progress_effect = {
			DESTINATION = scope:monks_destination
			ARRIVAL_EVENT = governor_contract_events_tova.0066
		}
		
		ai_chance = {
			base = 100
		}
	}

	option = { # Let them be monks.
		name = governor_contract_events_tova.0065.b
		scope:task_contract = {
			complete_task_contract = failure_standard
		}
		
		ai_chance = {
			base = 0
			
			modifier = {
				add = 100
				is_available = no
			}
			modifier = {
				factor = 0
				has_trait = lazy
			}
		}
	}
}

# Arrive at Monastery
governor_contract_events_tova.0066 = {
	type = character_event
	title = governor_contract_events_tova.0065.t
	window = big_event_window
	desc = governor_contract_events_tova.0066.desc
	theme = administrative
	override_background = { reference = temple }
	left_portrait = {
		character = root
		animation = hero_flex
	}

	right_portrait = {
		character = scope:warrior_monk
		animation = holding_staff
	}

	immediate = {
		hidden_effect = {
			current_travel_plan ?= { pause_travel_plan = yes }
			generate_governance_outcome_effect = { OPTIONS = 4 }
		}

		create_character = {
			template = monk_character_template
			location = root.location
			gender = male
			save_scope_as = warrior_monk
			after_creation = {
				add_trait = logistician
				add_trait = strong
				add_martial_skill = 4
			}
		}
	}

	option = { # Prove your worth in hand-to-hand combat.
		name = governor_contract_events_tova.0066.a
		duel = {
			skill = martial
			value = decent_skill_rating
			50 = { # Success
				desc = governor_contract_events_tova.0066.tt_success_desc
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0066_duel
					value = flag:martial_duel
				}
				trigger_event = governor_contract_events_tova.0067
				custom_tooltip = governor_contract_events_tova.0066.tt_success
			}
			50 = { # Failure
				desc = governor_contract_events_tova.0066.tt_failure_desc
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = failure_standard
					}
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0066_duel
					value = flag:martial_duel
				}
				trigger_event = governor_contract_events_tova.0068
			}
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_vengefulness = 1
			}
		}
	}
	option = { # Boast about your martial achievements.
		name = governor_contract_events_tova.0066.b
		duel = {
			skill = diplomacy
			value = decent_skill_rating
			50 = { # Success
				desc = governor_contract_events_tova.0066.tt_success_desc
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0066_duel
					value = flag:diplomacy_duel
				}
				trigger_event = governor_contract_events_tova.0067
				custom_tooltip = governor_contract_events_tova.0066.tt_success
			}
			50 = { # Failure
				desc = governor_contract_events_tova.0066.tt_failure_desc
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = failure_standard
					}
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0066_duel
					value = flag:diplomacy_duel
				}
				trigger_event = governor_contract_events_tova.0068
			}
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_sociability = 1
			}
		}
	}
	option = { # Explain exactly how effective weapons can be.
		name = governor_contract_events_tova.0066.c
		duel = {
			skill = learning
			value = decent_skill_rating
			50 = { # Success
				desc = governor_contract_events_tova.0066.tt_success_desc
				compare_modifier = {
					value = scope:duel_value
					multiplier = 3.5
					min = -49
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0066_duel
					value = flag:learning_duel
				}
				trigger_event = governor_contract_events_tova.0067
				custom_tooltip = governor_contract_events_tova.0066.tt_success
			}
			50 = { # Failure
				desc = governor_contract_events_tova.0066.tt_failure_desc
				compare_modifier = {
					value = scope:duel_value
					multiplier = -3.5
					min = -49
				}
				show_as_tooltip = {
					scope:task_contract = {
						complete_task_contract = failure_standard
					}
				}
				save_scope_value_as = {
					name = governor_contract_events_tova_0066_duel
					value = flag:learning_duel
				}
				trigger_event = governor_contract_events_tova.0068
			}
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_rationality = 1
			}
		}
	}
	option = { # My Marshal can handle this.
		name = governor_contract_events_tova.0066.d
		trigger = {
			always = yes 
			exists = root.cp:councillor_marshal
		}
		scope:task_contract = {
			complete_task_contract = let_marshal_handle
		}
		hidden_effect = {
			current_travel_plan ?= { resume_travel_plan = yes }
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = -1
			}
		}
	}
}

# Success event
governor_contract_events_tova.0067 = {
	type = character_event
	title = governor_contract_events_tova.0065.t
	window = big_event_window
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0066_duel ?= flag:martial_duel
				}
				desc = governor_contract_events_tova.0067.desc_martial
			}
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0066_duel ?= flag:diplomacy_duel
				}
				desc = governor_contract_events_tova.0067.desc_diplomacy
			}
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0066_duel ?= flag:learning_duel
				}
				desc = governor_contract_events_tova.0067.desc_learning
			}
		}
	}
	theme = administrative
	override_background = { reference = market }
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0066_duel ?= flag:martial_duel
			}
			animation = wrestling_victory
		}
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0066_duel ?= flag:diplomacy_duel
			}
			animation = storyteller
		}
		triggered_animation = {
			trigger = { always = yes }
			animation = debating
		}
	}
	right_portrait = {
		character = scope:warrior_monk
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0066_duel ?= flag:martial_duel
			}
			animation = wrestling_yield_start
		}
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0066_duel ?= flag:diplomacy_duel
			}
			animation = interested_left
		}
		triggered_animation = {
			trigger = {
				always = yes
			}
			animation = inspect_weapon
		}
	}

	immediate = {}

	option = { # Hire monks as Maa - Special governor trait option
		name = governor_contract_events_tova.0067.a
		trigger = {
			has_trait = governor # To show that the trait unlocks the option
			any_maa_regiment = {
				NOT = {
					is_unit_type = siege_weapon
				}
				can_upgrade_maa = yes
			}
		}
		scope:task_contract = {
			complete_task_contract = hire_monks_as_maa
		}
		random_maa_regiment = {
			limit = {
				NOT = {
					is_unit_type = siege_weapon
				}
				can_upgrade_maa = yes
			}
			change_maa_regiment_size = {
				size = 1
				reinforce = yes
			}
		}
		ai_chance = {
			base = 200
		}
	}
	option = { # This monk could prove a useful knight.
		name = governor_contract_events_tova.0067.b
		scope:task_contract = {
			complete_task_contract = hire_monk_as_knight
		}
		add_courtier = scope:warrior_monk
		current_travel_plan = {	add_companion = scope:warrior_monk }
		if = {
			limit = {
				scope:warrior_monk = {
					can_be_knight_trigger = { ARMY_OWNER = root }
					is_courtier_of = root
				}
			}
			scope:warrior_monk = { set_knight_status = force }
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_greed = 1
			}
		}
	}
	option = { # I will make fighters out of these monks.
		name = governor_contract_events_tova.0067.c
		scope:task_contract = {
			complete_task_contract = train_monks
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = 1
			}
		}
	}
	option = { # I will station troops here to help fortify the region.
		name = governor_contract_events_tova.0067.d
		scope:task_contract = {
			complete_task_contract = station_troops
		}
		ai_chance = {
			base = 100
			ai_value_modifier = {
				ai_energy = 1
			}
		}
	}
	after = {
		hidden_effect = {
			current_travel_plan ?= { resume_travel_plan = yes }
		}
		scope:warrior_monk = {
			silent_disappearance_ai_effect = yes
		}
	}
}

# Failure event
governor_contract_events_tova.0068 = {
	type = character_event
	title = governor_contract_events_tova.0050.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0066_duel ?= flag:martial_duel
				}
				desc = governor_contract_events_tova.0068.desc_martial
			}
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0066_duel ?= flag:diplomacy_duel
				}
				desc = governor_contract_events_tova.0068.desc_diplomacy
			}
			triggered_desc = {
				trigger = {
					scope:governor_contract_events_tova_0066_duel ?= flag:learning_duel
				}
				desc = governor_contract_events_tova.0068.desc_learning
			}
		}
	}
	theme = administrative
	override_background = { reference = market }
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0066_duel ?= flag:martial_duel
			}
			animation = wrestling_yield_start
		}
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0066_duel ?= flag:diplomacy_duel
			}
			animation = debating
		}
		triggered_animation = {
			trigger = { always = yes }
			animation = storyteller
		}
	}
	right_portrait = {
		character = scope:warrior_monk
		triggered_animation = {
			trigger = {
				scope:governor_contract_events_tova_0066_duel ?= flag:martial_duel
			}
			animation = wrestling_victory
		}
		triggered_animation = {
			trigger = {
				always = yes
			}
			animation = boredom
		}
	}

	option = {
		name = governor_contract_events_tova.0068.a
		scope:task_contract = {
			complete_task_contract = failure_standard
		}
	}

	after = {
		hidden_effect = {
			current_travel_plan ?= { resume_travel_plan = yes }
		}
		scope:warrior_monk = {
			silent_disappearance_ai_effect = yes
		}
	}
}
