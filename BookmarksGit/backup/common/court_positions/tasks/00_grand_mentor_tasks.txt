grand_mentor_court_position_task_teach_liege = {
	court_position_types = { grand_mentor_court_position }

	# Monthly cost for the task
	cost = {
		round = no
		gold = {
			value = 0
			if = {
				limit = {
					scope:liege = {
						has_treasury = no
					}
				}
				add = {
					value = monthly_court_position_task_cost
					multiply = 2
					desc = COURT_POSITION_TASK_COST_BREAKDOWN_BASE
					format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
				}
			}
		}
		treasury = {
			value = 0
			if = {
				limit = {
					scope:liege = {
						has_treasury = yes
					}
				}
				add = {
					value = monthly_court_position_task_cost
					multiply = 2
					desc = COURT_POSITION_TASK_COST_BREAKDOWN_BASE
					format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
				}
			}
		}
	}

	scaling_employer_modifiers = {
		terrible = {
			monthly_lifestyle_xp_gain_mult = 0.1
		}
		poor = {
			monthly_lifestyle_xp_gain_mult = 0.15
		}
		average = {
			monthly_lifestyle_xp_gain_mult = 0.2
		}
		good = {
			monthly_lifestyle_xp_gain_mult = 0.25
		}
		excellent = {
			monthly_lifestyle_xp_gain_mult = 0.3
		}
	}

	on_start = {
		scope:liege ?= {
			if = {
				limit = {
					exists = court_position:grand_mentor_court_position
				}
				root = { custom_tooltip = grand_mentor_teach_liege_tt }
			}
			else = {
				custom_tooltip = grand_mentor_teach_liege_fallback
			}
		}
	}

	on_monthly = {
		random = {
			chance = {
				value = 1
				add = {
					value = "aptitude(grand_mentor_court_position)"
					multiply = 4
				}
			}
			liege_or_court_owner = {
				save_scope_as = target_character
			}
			if = {
				limit = {
					exists = scope:target_character
				}
				random_list = {
					5 = { # Martial
						trigger = {
							scope:target_character.martial < root.martial
						}
						grand_mentor_mentoring_skill_effect = { SKILL = martial }
					}
					5 = { # Diplomacy
						trigger = {
							scope:target_character.diplomacy < root.diplomacy
						}
						grand_mentor_mentoring_skill_effect = { SKILL = diplomacy }
					}
					5 = { # Stewardship
						trigger = {
							scope:target_character.stewardship < root.stewardship
						}
						grand_mentor_mentoring_skill_effect = { SKILL = stewardship }
					}
					5 = { # Learning
						trigger = {
							scope:target_character.learning < root.learning
						}
						grand_mentor_mentoring_skill_effect = { SKILL = learning }
					}
					5 = { # Intrigue
						trigger = {
							scope:target_character.intrigue < root.intrigue
						}
						grand_mentor_mentoring_skill_effect = { SKILL = intrigue }
					}
					25 = { # Governor trait
						trigger = {
							scope:target_character = {
								has_trait = governor
							}
						}
						grand_mentor_mentoring_trait_xp_effect = { TRAIT = governor }
					}
					25 = { # Confucian Education trait
						trigger = {
							scope:target_character = {
								has_trait = confucian_education
							}
						}
						grand_mentor_mentoring_trait_xp_effect = { TRAIT = confucian_education }
					}
				}
			}
		}
	}

	ai_will_do = {
		value = 25
	}
}

grand_mentor_court_position_task_edify_heirs = {
	court_position_types = { grand_mentor_court_position }

	# Monthly cost for the task
	cost = {
		round = no
		gold = {
			value = 0
			if = {
				limit = {
					scope:liege = {
						has_treasury = no
					}
				}
				add = {
					value = monthly_court_position_task_cost
					multiply = 2
					desc = COURT_POSITION_TASK_COST_BREAKDOWN_BASE
					format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
				}
			}
		}
		treasury = {
			value = 0
			if = {
				limit = {
					scope:liege = {
						has_treasury = yes
					}
				}
				add = {
					value = monthly_court_position_task_cost
					multiply = 2
					desc = COURT_POSITION_TASK_COST_BREAKDOWN_BASE
					format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
				}
			}
		}
	}

	scaling_employer_modifiers = {
		terrible = {
			monthly_dynasty_prestige = 0.05
			dynasty_house_opinion = 2
		}
		poor = {
			monthly_dynasty_prestige = 0.1
			dynasty_house_opinion = 4
		}
		average = {
			monthly_dynasty_prestige = 0.15
			dynasty_house_opinion = 6
		}
		good = {
			monthly_dynasty_prestige = 0.20
			dynasty_house_opinion = 8
		}
		excellent = {
			monthly_dynasty_prestige = 0.25
			dynasty_house_opinion = 10
		}
	}

	on_start = {
		scope:liege ?= {
			if = {
				limit = {
					exists = court_position:grand_mentor_court_position
				}
				root = { custom_tooltip = grand_mentor_edify_heirs_tt }
			}
			else = {
				custom_tooltip = grand_mentor_edify_heirs_fallback
			}
		}
	}

	on_monthly = {
		random = {
			chance = {
				value = 1
				add = {
					value = "aptitude(grand_mentor_court_position)"
					multiply = 4
				}
			}
			random_list = {
				1 = {
					liege_or_court_owner = {
						random_vassal = {
							limit = {
								NOT = { this = root }
								house = top_liege.house
							}
						}
					}
				}
				1 = {
					liege_or_court_owner = {
						random_courtier = {
							limit = { 
								NOT = { this = root }
								house = top_liege.house
							}
							save_scope_as = target_character
						}
					}
				}
			}
			if = {
				limit = {
					exists = scope:target_character
				}
				random_list = {
					5 = { # Martial
						trigger = {
							scope:target_character.martial < root.martial
						}
						grand_mentor_mentoring_skill_effect = { SKILL = martial }
					}
					5 = { # Diplomacy
						trigger = {
							scope:target_character.diplomacy < root.diplomacy
						}
						grand_mentor_mentoring_skill_effect = { SKILL = diplomacy }
					}
					5 = { # Stewardship
						trigger = {
							scope:target_character.stewardship < root.stewardship
						}
						grand_mentor_mentoring_skill_effect = { SKILL = stewardship }
					}
					5 = { # Learning
						trigger = {
							scope:target_character.learning < root.learning
						}
						grand_mentor_mentoring_skill_effect = { SKILL = learning }
					}
					5 = { # Intrigue
						trigger = {
							scope:target_character.intrigue < root.intrigue
						}
						grand_mentor_mentoring_skill_effect = { SKILL = intrigue }
					}
					25 = { # Governor trait
						trigger = {
							scope:target_character = {
								has_trait = governor
							}
						}
						grand_mentor_mentoring_trait_xp_effect = { TRAIT = governor }
					}
					25 = { # Confucian Education trait
						trigger = {
							scope:target_character = {
								has_trait = confucian_education
							}
						}
						grand_mentor_mentoring_trait_xp_effect = { TRAIT = confucian_education }
					}
				}
			}
		}
	}

	ai_will_do = {
		value = 25
	}
}

grand_mentor_court_position_task_train_officials = {
	court_position_types = { grand_mentor_court_position }

	# Monthly cost for the task
	cost = {
		round = no
		gold = {
			value = 0
			if = {
				limit = {
					scope:liege = {
						has_treasury = no
					}
				}
				add = {
					value = monthly_court_position_task_cost
					multiply = 2
					desc = COURT_POSITION_TASK_COST_BREAKDOWN_BASE
					format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
				}
			}
		}
		treasury = {
			value = 0
			if = {
				limit = {
					scope:liege = {
						has_treasury = yes
					}
				}
				add = {
					value = monthly_court_position_task_cost
					multiply = 2
					desc = COURT_POSITION_TASK_COST_BREAKDOWN_BASE
					format = "BASE_VALUE_FORMAT_DECIMALS_PLUS_NEGATIVE"
				}
			}
		}
	}

	scaling_employer_modifiers = {
		terrible = {
			monthly_influence = 0.5 
		}
		poor = {
			monthly_influence = 0.75 
		}
		average = {
			monthly_influence = 1.0 
		}
		good = {
			monthly_influence = 1.25 
		}
		excellent = {
			monthly_influence = 1.5 
		}
	}

	on_start = {
		scope:liege ?= {
			if = {
				limit = {
					exists = court_position:grand_mentor_court_position
				}
				root = { custom_tooltip = grand_mentor_train_officials_tt }
			}
			else = {
				custom_tooltip = grand_mentor_train_officials_fallback
			}
		}
	}

	on_monthly = {
		random = {
			chance = {
				value = 1
				add = {
					value = "aptitude(grand_mentor_court_position)"
					multiply = 4
				}
			}
			random_list = {
				1 = {
					liege_or_court_owner = {
						random_vassal = {
							limit = {
								NOR = { 
									this = root
									house = top_liege.house
								}
							}
							save_scope_as = target_character
						}
					}
				}
				1 = {
					liege_or_court_owner = {
						random_court_position_holder = {
							limit = { 
								NOR = {
									this = root
									house = top_liege.house
								}
							}
							save_scope_as = target_character
						}
					}
				}
			}
			if = {
				limit = {
					exists = scope:target_character
				}
				random_list = {
					5 = { # Martial
						trigger = {
							scope:target_character.martial < root.martial
						}
						grand_mentor_mentoring_skill_effect = { SKILL = martial }
					}
					5 = { # Diplomacy
						trigger = {
							scope:target_character.diplomacy < root.diplomacy
						}
						grand_mentor_mentoring_skill_effect = { SKILL = diplomacy }
					}
					5 = { # Stewardship
						trigger = {
							scope:target_character.stewardship < root.stewardship
						}
						grand_mentor_mentoring_skill_effect = { SKILL = stewardship }
					}
					5 = { # Learning
						trigger = {
							scope:target_character.learning < root.learning
						}
						grand_mentor_mentoring_skill_effect = { SKILL = learning }
					}
					5 = { # Intrigue
						trigger = {
							scope:target_character.intrigue < root.intrigue
						}
						grand_mentor_mentoring_skill_effect = { SKILL = intrigue }
					}
					25 = { # Governor trait
						trigger = {
							scope:target_character = {
								has_trait = governor
							}
						}
						grand_mentor_mentoring_trait_xp_effect = { TRAIT = governor }
					}
					25 = { # Confucian Education trait
						trigger = {
							scope:target_character = {
								has_trait = confucian_education
							}
						}
						grand_mentor_mentoring_trait_xp_effect = { TRAIT = confucian_education }
					}
					25 = { # Merit gain
						trigger = {
							merit >= monumental_merit_value
						}
						grand_mentor_mentoring_merit_effect = yes
					}
				}
			}
		}
	}

	ai_will_do = {
		value = 25
	}
}
