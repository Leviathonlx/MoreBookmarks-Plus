#
court_position_stewardship_trigger = { # Is courtier suited to stewardship positions?
	OR = {
		has_education_stewardship_trigger = yes 
		has_trait = diligent
		stewardship >= medium_skill_rating
	}
}

court_position_martial_trigger = {
	can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = $EMPLOYER$ }
	OR = {
		number_of_commander_traits > 0
		has_trait = brave
		prowess >= mediocre_skill_rating
		has_trait = viking
		has_trait = varangian
		has_trait = berserker
		has_trait = shieldmaiden
		has_trait = lifestyle_blademaster
		has_trait = education_martial_prowess
	}
}

court_position_learning_trigger = { # Is courtier suited to learning positions?
	OR = {
		has_education_learning_trigger = yes
		has_trait = devoted
	}
}

base_court_position_validity_trigger = {
	liege ?= $EMPLOYER$ # To ensure invalidation if they leave court
	is_imprisoned = no
	NOT = { is_at_war_with = $EMPLOYER$ }
	trigger_if = { # Simply so we can have EMPLOYER fed at all times
		limit = { $EMPLOYER$ ?= { always = yes } }
	}
}

royal_architect_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
}

seneschal_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	trigger_if = {
		limit = { NOT = { has_court_position = seneschal_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

court_tutor_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	trigger_if = {
		limit = { NOT = { has_court_position = court_tutor_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

high_almoner_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
}

court_physician_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
}

antiquarian_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no

	trigger_if = {
		limit = {
			$EMPLOYER$ = { is_ai = yes }
		}
		$EMPLOYER$ = { has_any_artifact = yes }
	}

	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	trigger_if = {
		limit = { NOT = { has_court_position = antiquarian_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same time as another similar position
	}
}

master_of_horse_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
}

bodyguard_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	NOR = {
		has_trait = blind
		has_trait = infirm
	}
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = $EMPLOYER$ }
	trigger_if = {
		limit = { NOT = { has_court_position = bodyguard_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

champion_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	NOR = {
		has_trait = blind
		has_trait = infirm
	}
	can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = $EMPLOYER$ }
}

master_of_hunt_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	NOR = {
		has_trait = blind
		has_trait = infirm
	}
	can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = $EMPLOYER$ }
}

court_poet_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	has_trait = poet
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	trigger_if = {
		limit = { NOT = { has_court_position = court_poet_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

court_musician_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	trigger_if = {
		limit = { NOT = { has_court_position = court_musician_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

court_jester_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	trigger_if = {
		limit = { NOT = { has_court_position = court_jester_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

executioner_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_adult = yes
	is_landed = no
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	OR = {
		trigger_if = { # Done to hide the tooltip
			limit = { has_court_position = executioner_court_position }
			always = yes
		}
		custom_tooltip = {
			text = has_imprisonment_reason_no_subject
			$EMPLOYER$ = { has_imprisonment_reason = prev }
		}
		trigger_if = { # Imprisoned characters should only be valid if they aren't already the executioner
			limit = {
				is_imprisoned = yes
				NOT = { has_court_position = executioner_court_position }
			}
			is_imprisoned_by = $EMPLOYER$
		}
		custom_tooltip = {
			text = has_strong_hook_no_subject
			$EMPLOYER$ = { has_strong_usable_hook = prev }
		}
	}
	trigger_if = {
		limit = { NOT = { has_court_position = executioner_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

food_taster_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = $EMPLOYER$ }
	trigger_if = {
		limit = {
			scope:liege.faith = {
				NOT = { has_doctrine = doctrine_clerical_function_recruitment }
			}
		}
		is_clergy = no
	}
	trigger_if = {
		limit = { NOT = { has_court_position = food_taster_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

cupbearer_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	trigger_if = {
		limit = { NOT = { has_court_position = cupbearer_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

lady_in_waiting_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	is_female = yes
	trigger_if = {
		limit = { NOT = { has_court_position = lady_in_waiting_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same time as another similar position
	}
}

chief_eunuch_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	is_eunuch_trigger = yes
}

court_gardener_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	trigger_if = {
		limit = { NOT = { has_court_position = court_gardener_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same time as another similar position
	}
}

court_artificer_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	OR = {
		custom_tooltip = {
			text = has_a_completed_inspiration
			has_completed_inspiration = yes
		}
		custom_tooltip = {
			text = has_an_inspiration
			exists = inspiration
		}
	}
	trigger_if = {
		limit = { NOT = { has_court_position = court_artificer_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

cultural_emissary_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	diplomacy >= 8
}

chief_qadi_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	has_religion = religion:islam_religion
	has_trait = education_learning
	trigger_if = {
		limit = { $EMPLOYER$.faith = { has_doctrine = doctrine_gender_male_dominated } }
		is_male = yes
	}
	trigger_else_if = {
		limit = { $EMPLOYER$.faith = { has_doctrine = doctrine_gender_female_dominated } }
		is_female = yes
	}
	trigger_else = { always = yes }
}				

garuda_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_knight = yes
	can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = $EMPLOYER$ }
}

keeper_of_swans_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
}

travel_leader_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
	is_clergy = no
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	trigger_if = {
		limit = { bannable_serving_diarch_trigger = yes }
		bannable_serving_diarch_trigger = no
	}
	trigger_if = {
		limit = { has_variable = gone_adventuring }
		NOT = { has_variable = gone_adventuring }
	}
	trigger_if = {
		limit = { NOT = { has_court_position = travel_leader_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same time as another similar position
	}
}

wet_nurse_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_playable_character = no
	is_female = yes
	age < 46
	NOT = { is_close_family_of = $EMPLOYER$ }
	has_no_particular_noble_roots_trigger = yes
	trigger_if = {
		limit = { NOT = { has_court_position = wet_nurse_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes
	}
	# Nuns cannot be wet nurses
	NOT = { has_trait = devoted }
}

master_assassin_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_playable_character = no # You can't be a public figure and a master assassin
	has_no_particular_noble_roots_trigger = yes
	custom_tooltip = {
		text = IS_NOT_THE_SPOUSE_OF_CHARACTER_COURT_POSITION
		NOT = { is_spouse_of = $EMPLOYER$ }
	}
	faith = {
		has_doctrine = tenet_fp3_fedayeen
		NOR = {
			has_doctrine = tenet_pacifism
			has_doctrine = tenet_dharmic_pacifism 
		}
	}
	can_be_combatant_based_on_gender_trigger = { ARMY_OWNER = $EMPLOYER$ }
	trigger_if = {
		limit = { NOT = { has_court_position = master_assassin_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

court_scholar_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_adult = yes
	is_landed = no #A requirement for inspirations
	OR = {
		is_imprisoned = no
		is_imprisoned_by = $EMPLOYER$
	}
	trigger_if = {
		limit = { NOT = { has_court_position = court_scholar_court_position } }
		court_position_does_not_already_have_a_job_trigger = yes # This positions is considered a job, and cannot be held at the same tims as another similar position
	}
}

chronicler_validity_trigger = {
	base_court_position_validity_trigger = { EMPLOYER = $EMPLOYER$ }
	is_landed = no
}
