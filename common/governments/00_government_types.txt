##EDITED VANILLA FILE##

#government_has_flag = government_is_feudal
#government_has_flag = government_is_republic
#government_has_flag = government_is_theocracy
#government_has_flag = government_is_clan
#government_has_flag = government_is_tribal
#government_has_flag = government_is_mercenary
#government_has_flag = government_is_holy_order

feudal_government = {
	create_cadet_branches = yes
	rulers_should_have_dynasty = yes
	dynasty_named_realms = yes
	royal_court = yes

	fallback = 1
	primary_holding = castle_holding
	required_county_holdings = { castle_holding city_holding church_holding }
	vassal_contract = {
		feudal_government_taxes
		feudal_government_levies
		special_contract
		religious_rights
		fortification_rights
		coinage_rights
		succession_rights
		war_declaration_rights
		council_rights
		title_revocation_rights
		jizya_special_rights
		marriage_favor_rights 
	}
	
	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player).
	flag = government_is_feudal
	
	color = hsv{ 0.67 1.00 0.78 }
}

republic_government = {
	primary_holding = city_holding
	valid_holdings = { castle_holding }
	required_county_holdings = { city_holding castle_holding church_holding }

	ai = {
		arrange_marriage = no
		use_goals = no
		use_scripted_guis = no
		perform_religious_reformation = no
	}
	vassal_contract = { republic_government_obligations }
	
	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player). 
	flag = government_is_republic
	
	color = hsv{ 0.00 1.00 0.98 }
}

# Head of faith will always get this if possible
theocracy_government = {
	primary_holding = church_holding
	valid_holdings = { castle_holding }
	religious = yes
	required_county_holdings = { church_holding castle_holding city_holding }

	can_get_government = {
		NOT = {
			faith = {
				has_doctrine = doctrine_theocracy_lay_clergy
			}
		}
	}

	vassal_contract = { theocracy_government_obligations }
	
	
	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player).
	flag = government_is_theocracy
	
	color = hsv{ 0.00 0.00 0.78 }
}

clan_government = {
	primary_holding = castle_holding
	primary_heritages = { heritage_arabic heritage_iranian heritage_turkic }
	
	fallback = 2
	
	preferred_religions = { islam_religion }
	create_cadet_branches = yes
	rulers_should_have_dynasty = yes
	royal_court = yes			  

	valid_holdings = { castle_holding tribal_holding city_holding } #Made tribal a valid holding. Prevents tribal areas from having holdings being made into castles at game start as plenty of islamic areas are tribal even to this day
	required_county_holdings = { castle_holding city_holding church_holding }
	always_use_patronym = yes
	dynasty_named_realms = yes

	house_unity = clan_house_unity
	tax_slot_type = clan_tax_slot						   
	vassal_contract = {
		clan_tax_collector_obligations
		special_contract
		religious_rights
		war_declaration_rights
		council_rights
		title_revocation_rights
		marriage_favor_rights
	}
	
	opinion_of_liege = {
		scope:vassal = {
			if = {
				limit = {
					NOT = {
						is_allied_to = scope:liege
					}
				}
				if = {
					limit = {
						is_powerful_vassal = yes
					}
					value = -20 #Was 30. This modifier is way too high and really messes with later bookmarks. It's also a silly requirement when so few muslim characters have defined spouses or daughters so it basically means a muslim ruler (or non muslim ruler ruling muslims) starts with most his vassals hating him and being unable to do anything about it
				}
				else = {
					value = -10
				}
			}
		}
	}
	opinion_of_liege_desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:vassal = {
						NOT = {
							is_allied_to = scope:liege
						}
						is_powerful_vassal = yes
					}
				}
				desc = "GOVERNMENT_CLAN_NOT_ALLIED_POWERFUL"
			}
			triggered_desc = {
				trigger = {
					scope:vassal = {
						NOT = {
							is_allied_to = scope:liege
						}
						is_powerful_vassal = no
					}
				}
				desc = "GOVERNMENT_CLAN_NOT_ALLIED"
			}
		}
	}
	flag = government_can_raid_rule					

	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player).
	flag = government_is_clan
	flag = may_appoint_viziers
	color = hsv{ 0.39 0.93 0.54 }
	
}

tribal_government = {
	rulers_should_have_dynasty = yes
	affected_by_development = no
	regiments_prestige_as_gold = yes
	supply_limit_mult_for_others = -0.5
	primary_holding = tribal_holding
	required_county_holdings = { tribal_holding }
	dynasty_named_realms = yes					   
	royal_court = yes
	valid_holdings = { castle_holding }
	
	
	prestige_opinion_override = { -10 0 3 5 10 20 }
	always_use_patronym = yes	

	vassal_contract = { tribal_government_obligations }
	
	character_modifier = {
		title_creation_cost_mult = -0.5
		army_maintenance_mult = -0.5
		#Turned all these from -20 to -10.
		feudal_government_vassal_opinion = -10
		clan_government_vassal_opinion = -10
		republic_government_vassal_opinion = -10
		character_travel_safety = 10
	
		ai_war_chance = 0.25
		monthly_prestige = 0.2
	}
	
	flag = government_can_raid_rule
	
	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player).
	flag = government_is_tribal
	
	color = hsv{ 0.02 0.75 0.36 }
}

# Mercenary will always get this
mercenary_government = {
	court_generate_spouses = no
	court_generate_commanders = 5
	council = no

	ai = {
		arrange_marriage = no
		use_goals = no
		use_scripted_guis = no
		perform_religious_reformation = no
	}

	flag = can_not_be_vassal_or_liege
	
	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player).
	flag = government_is_mercenary
	
	color = hsv{ 0.00 0.00 0.66 }
}

# Holy order will always get this
holy_order_government = {
	court_generate_spouses = no
	court_generate_commanders = 5
	council = no

	required_county_holdings = { castle_holding city_holding church_holding }

	ai = {
		arrange_marriage = no
		use_goals = no
		use_scripted_guis = yes
		perform_religious_reformation = no
	}

	vassal_contract = { theocracy_government_obligations }

	valid_holdings = { castle_holding city_holding church_holding }
	
	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player).
	flag = government_is_holy_order
	
	color = hsv{ 0.00 0.00 0.66 }
}

#Event spawned historical Holy Orders
holy_order_county_government = {
	court_generate_spouses = no
	court_generate_commanders = 20
	council = yes
	primary_holding = castle_holding

	required_county_holdings = { castle_holding city_holding church_holding }

	ai = {
		arrange_marriage = no
		use_goals = no
		use_scripted_guis = yes
		perform_religious_reformation = no
	}
	#Workaround to prevent Islam barony temple titles becoming Holy Orders for some reason due to the lay clergy doctrine. Preventing that doctrine as a whole like in theocracy_government would prevent assassins from having the government
	can_get_government = {
		primary_title.tier >= tier_duchy
	}

	vassal_contract = { theocracy_government_obligations }

	valid_holdings = { castle_holding city_holding church_holding }
	
	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player).
	flag = government_is_holy_order
	
	color = hsv{ 0.2 0.2 0.2 }
}

#RESREPUBLICA

res_republic_government = {
	primary_holding = city_holding
	required_county_holdings = { city_holding castle_holding church_holding }

	royal_court = yes	#May look odd but eh the Doges definitely did have throne rooms and courts.	
	
	can_get_government = { 
		NOT = {
			has_government = feudal_government
		}
	}
	
	vassal_contract = { republic_government_obligations }
	
	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player). 
	flag = government_is_republic
	
	color = hsv{ 0.00 1.00 0.98 }
}

governor_government = {
	primary_holding = castle_holding
	required_county_holdings = { castle_holding city_holding church_holding }

	ai = {
		arrange_marriage = yes
		use_goals = yes
		perform_religious_reformation = no
	}

	vassal_contract = { republic_government_obligations }
	
	# Use flags instead of has_government for moddability if possible (i.e., wherever not visible to the player). 
	flag = government_is_republic
	
	color = hsv{ 0.50 0.50 0.50 }
}

#OE

#For Nomadic Empires that ruled both sedentary and nomadic peoples. Mix of feudal and tribal mainly to better allow them to rule their feudal subjects. Not intended for anyone but the top level rulers and not for the Yuan who adopted the Chinese form of government

ulus_government = {
	rulers_should_have_dynasty = yes
	#affected_by_development = no
	regiments_prestige_as_gold = yes
	supply_limit_mult_for_others = -0.5
	
	primary_holding = castle_holding #The Mongols, Liao, and Jin all had set capitals
	
	valid_holdings = { castle_holding city_holding tribal_holding }
	
	required_county_holdings = { castle_holding city_holding church_holding tribal_holding }
	
	create_cadet_branches = yes
	royal_court = yes
	dynasty_named_realms = no

	fallback = 5

	prestige_opinion_override = { -5 0 10 15 30 45 }

	vassal_contract = {
		tribal_government_obligations
		special_contract
		religious_rights
		war_declaration_rights
		council_rights
		title_revocation_rights

		marriage_favor_rights
	}

	character_modifier = {
		title_creation_cost_mult = -0.3
		army_maintenance_mult = -0.3

		tribal_government_vassal_opinion = 15
		feudal_government_vassal_opinion = 10
		powerful_vassal_opinion = 30
	
		ai_war_chance = 0.5
		monthly_prestige = 1
		monthly_income = 2
	}
	
	flag = government_can_raid_rule
	
	flag = government_is_feudal
	flag = government_is_ulus
	
	color = hsv{ 0.32 0.25 0.36 }
}