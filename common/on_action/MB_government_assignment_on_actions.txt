#Don't want to use same naming as governments+
on_game_start = {
	on_actions = {
		MB_on_government_assign_start
	}
}

MB_on_government_assign_start = {
	effect = {
	
		every_ruler = {
			
			if = {
				limit = {
					exists = capital_county
					capital_county.title_province = { geographical_region = world_burma }
					has_government = feudal_government
					OR = {
						religion = religion:hinduism_religion
						religion = religion:buddhism_religion
						religion = religion:jainism_religion
						religion = religion:sanamahism_religion
					}
					NOT = { faith = faith:lamaism }
					NOT = { has_government = mercenary_government }
					NOT = { has_government = theocracy_government }
					NOT = { has_government = landless_adventurer_government }
				}
				change_government = mandala_government
			
				every_vassal = {
					limit = {
						highest_held_title_tier = tier_barony
						OR = {
							has_government = feudal_government
							has_government = republic_government
						}
					}
					change_government = mandala_government
				}
			}
			if = {
				limit = {
					exists = capital_county
					capital_county.title_province = { geographical_region = world_india }
					has_government = feudal_government
					NOT = { has_government = theocracy_government }
					NOT = { has_government = landless_adventurer_government }
					OR = {
						culture = { has_cultural_pillar = heritage_indo_aryan }
						culture = { has_cultural_pillar = heritage_dravidian }
						culture = { has_cultural_pillar = heritage_burman }
					}
					OR = {
						religion = religion:hinduism_religion
						religion = religion:buddhism_religion
						religion = religion:jainism_religion
						religion = religion:sanamahism_religion
						religion = religion:indian_religion
					}
					NOT = { faith = faith:lamaism }
				}
				change_government = mandala_government

				every_vassal = {
					limit = {
						highest_held_title_tier = tier_barony
						OR = {
							has_government = feudal_government
							has_government = republic_government
						}
					}
					change_government = mandala_government
				}
			}		
			
			if = {
				limit = {
					exists = capital_county
					NOT = { has_government = theocracy_government }
					NOT = { has_government = landless_adventurer_government }
					NOT = { has_government = clan_government }
					capital_county.title_province = {
						OR = {
							geographical_region = world_southeast_asia
							geographical_region = world_burma
						}
					}
					has_government = feudal_government
					OR = {
						religion = religion:hinduism_religion
						religion = religion:buddhism_religion
						religion = religion:jainism_religion
						religion = religion:sanamahism_religion
					}
					NOT = { faith = faith:lamaism }
				}
				change_government = mandala_government
				#add_realm_law_skip_effects = single_heir_succession_law

				every_vassal = {
					limit = {
						highest_held_title_tier = tier_barony
						OR = {
							has_government = feudal_government
							has_government = republic_government
						}
					}
					change_government = mandala_government
					#add_realm_law_skip_effects = single_heir_succession_law
				}
			}
			if = {
				limit = {
					exists = capital_county
					NOT = { has_government = theocracy_government }
					NOT = { has_government = landless_adventurer_government }
					capital_county.title_province = { geographical_region = world_india }
					has_government = feudal_government
					OR = {
						culture = { has_cultural_pillar = heritage_indo_aryan }
						culture = { has_cultural_pillar = heritage_dravidian }
						culture = { has_cultural_pillar = heritage_burman }
					}
					OR = {
						religion = religion:hinduism_religion
						religion = religion:buddhism_religion
						religion = religion:jainism_religion
						religion = religion:sanamahism_religion
					}
					NOT = { faith = faith:lamaism }
				}
				change_government = mandala_government
				add_realm_law_skip_effects = single_heir_succession_law

				every_vassal = {
					limit = {
						highest_held_title_tier = tier_barony
						OR = {
							has_government = feudal_government
							has_government = republic_government
						}
					}
					change_government = mandala_government
					add_realm_law_skip_effects = single_heir_succession_law
				}
			}
			
			if = {
				limit = {
					exists = capital_county
					has_government = clan_government
					capital_county.title_province = {
						OR = {
							geographical_region = world_southeast_asia
							geographical_region = world_burma
						}
					}
				}
				add_realm_law_skip_effects = clan_impassive_partition_succession_law

				every_vassal = {
					limit = {
						highest_held_title_tier = tier_barony
						has_government = clan_government
					}
					add_realm_law_skip_effects = clan_impassive_partition_succession_law
				}
			}
			
			if = {
				limit = {
					has_government = mandala_government
				}

				if = {
					limit = { NOT = { has_realm_law = mandala_authority_0 } }
					add_realm_law_skip_effects = mandala_authority_0
				}
				if = {
					limit = { has_realm_law = crown_authority_0 }
					remove_realm_law = crown_authority_0
				}
				if = {
					limit = { has_realm_law = crown_authority_1 }
					remove_realm_law = crown_authority_1
				}
				if = {
					limit = { has_realm_law = crown_authority_2 }
					remove_realm_law = crown_authority_2
				}
				if = {
					limit = { has_realm_law = crown_authority_3 }
					remove_realm_law = crown_authority_3
				}
			}
			
			if = {
				limit = {
					AND = {
						has_government = mandala_government
						game_start_date > 1100.1.1
						game_start_date < 1300.1.1
					}
				}

				if = {
					limit = { NOT = { has_realm_law = mandala_authority_1 } }
					add_realm_law_skip_effects = mandala_authority_1
				}
			}
			
			if = {
				limit = {
					AND = {
						has_government = mandala_government
						game_start_date > 1300.1.1
					}
				}

				if = {
					limit = { NOT = { has_realm_law = mandala_authority_2 } }
					add_realm_law_skip_effects = mandala_authority_2
				}
			}
			
			#if = {
			#	limit = {
			#		has_government = feudal_government
			#	}
			#
			#	if = {
			#		limit = { NOT = { has_realm_law = crown_authority_0 } }
			#		add_realm_law_skip_effects = crown_authority_0
			#	}
			#}
			#
			#if = {
			#	limit = {
			#		AND = {
			#			has_government = feudal_government
			#			game_start_date > 1100.1.1
			#			game_start_date < 1300.1.1
			#		}
			#	}
			#
			#	if = {
			#		limit = { NOT = { has_realm_law = crown_authority_1 } }
			#		add_realm_law_skip_effects = crown_authority_1
			#	}
			#}
			
		}
		
		#Make governments be properly set for bookmarks
		
		#Administrative Government - Let's set this in a more sensible way than editing a thousand history entries like Paradox did
		#Pre 1204 ERE
		every_ruler = {
		
			if = {
				limit = {
					game_start_date <= 1204.1.1 
				}
				
				title:e_byzantium.holder = { change_government = administrative_government }
				
				title:e_byzantium.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Later ERE
		every_ruler = {
		
			if = {
				limit = {
					game_start_date >= 1261.7.25 
					game_start_date <= 1338.1.1 
				}
				
				title:e_byzantium.holder = { change_government = administrative_government }
				
				title:e_byzantium.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Epirus
		every_ruler = {
		
			if = {
				limit = {
					game_start_date >= 1204.1.1 
				}
				
				title:k_epirus.holder = { change_government = administrative_government }
				
				title:k_epirus.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Trebizond
		every_ruler = {
		
			if = {
				limit = {
					game_start_date >= 1204.1.1 
				}
				
				title:k_trebizond.holder = { change_government = administrative_government }
				
				title:k_trebizond.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Nikaea
		every_ruler = {
		
			if = {
				limit = {
					game_start_date >= 1204.1.1 
					game_start_date <= 1261.7.25 
				}
				
				title:k_nikaea.holder = { change_government = administrative_government }
				
				title:k_nikaea.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#China
		every_ruler = {
		
			if = {
				
				title:e_celestia_china.holder = { change_government = administrative_government }
				
				title:e_celestia_china.holder ?= {
					every_vassal = {
						limit = {
							exists = capital_county
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Get any stragglers
		every_ruler = {
			if = {
				limit = {
					
					game_start_date >= 750.1.28
					
					exists = capital_county
					NOT = { has_government = theocracy_government }
					NOT = { has_government = landless_adventurer_government }
					OR = {
						capital_county.title_province = { geographical_region = world_china_proper }
						capital_county.title_province = { geographical_region = world_luodian }
					}
						
					has_government = feudal_government
					OR = {
						culture = { has_cultural_pillar = heritage_chinese }
						culture = culture:sogdian
						culture = culture:shatuo
					}
					OR = {
						religion = religion:buddhism_religion
						religion = religion:taoism_religion
					}
				}
				change_government = administrative_government
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Jin
		every_ruler = {
			if = {
				limit = {
					
					game_start_date >= 1115.1.28
					
					exists = capital_county
					NOT = { has_government = theocracy_government }
					NOT = { has_government = landless_adventurer_government }
					OR = {
						capital_county.title_province = { geographical_region = world_china }
						capital_county.title_province = { geographical_region = world_manchuria }
					}
						
					has_government = feudal_government
					OR = {
						culture = { has_cultural_pillar = heritage_chinese }
						culture = { has_cultural_pillar = heritage_tungusic }
						culture = culture:khitan
					}
					OR = {
						religion = religion:buddhism_religion
						religion = religion:taoism_religion
					}
				}
				change_government = administrative_government
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Japan
		every_ruler = {
			if = {
				limit = {
			
					game_start_date <= 1219.1.1 #Japan eventually became feudal with the Shogunate with the Jōkyū War being when the transition was completed
					
					exists = capital_county
					NOT = { has_government = theocracy_government }
					NOT = { has_government = landless_adventurer_government }
					
					capital_county.title_province = { geographical_region = world_japan }
						
					has_government = feudal_government
					culture = { has_cultural_pillar = heritage_yamato }
					OR = {
						religion = religion:buddhism_religion
						religion = religion:shinto_religion
					}
					
				}
				change_government = administrative_government
				
				title:k_yamato.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							NOR = { has_title = title:d_nf_japan_tachibana 
									has_title = title:d_nf_japan_taira
									has_title = title:d_nf_japan_minamoto
									has_title = title:d_nf_japan_fujiwara_oshu
									has_title = title:d_nf_japan_fujiwara_nanke
									has_title = title:d_nf_japan_fujiwara_hokke
									has_title = title:d_nf_japan_fujiwara_shikike
									has_title = title:d_nf_japan_fujiwara_kyoke
									has_title = title:d_nf_japan_yamato
									has_title = title:d_nf_japan_shogunate_hojo
							
							}
							OR = {
								has_government = feudal_government
								has_government = administrative_government
							}
						}
						change_government = feudal_government
					}
				}
				
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Goryeo
		every_ruler = {
		
			if = {
				limit = {
					game_start_date >= 990.1.1
				}
				title:k_goryeo.holder = { change_government = administrative_government }
				
				title:k_goryeo.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Xi Xia
		every_ruler = {
		
			if = {
				limit = {
					game_start_date >= 1035.1.1
					game_start_date <= 1223.1.1
				}
				title:e_xi_xia.holder = { change_government = administrative_government }
				
				title:e_xi_xia.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Jinhai/Viet
		every_ruler = {
		
			if = {
				limit = {
					game_start_date = 936.8.7
				}
				title:k_jinghai.holder = { change_government = administrative_government }
				
				title:k_jinghai.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = mandala_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		#Dai Viet
		every_ruler = {
		
			if = {
				limit = {
					game_start_date >= 960.1.1
				}
				title:k_annam.holder = { change_government = administrative_government }
				
				title:k_annam.holder ?= {
					every_vassal_or_below = {
						limit = {
							highest_held_title_tier >= tier_barony
							NOT = { has_government = theocracy_government }
							NOT = { has_government = landless_adventurer_government }
							OR = {
								has_government = feudal_government
								has_government = mandala_government
								has_government = republic_government
							}
						}
						change_government = administrative_government
					}
				}
			}
			#No need to further specify this
			else_if = {
				limit = {
					exists = holder
					NOT = { has_dlc_feature = roads_to_power }
				}
				holder = {
					change_government = feudal_government
				}
			}
		}
		
		##Mamluks
		#every_ruler = {
		#
		#	if = {
		#		limit = {
		#			game_start_date >= 1337.1.1
		#		}
		#		title:e_egypt.holder = { change_government = administrative_government }
		#		
		#		title:e_egypt.holder ?= {
		#			every_vassal_or_below = {
		#				limit = {
		#					highest_held_title_tier >= tier_barony
		#					NOT = { has_government = theocracy_government }
		#					NOT = { has_government = landless_adventurer_government }
		#					OR = {
		#						has_government = feudal_government
		#						has_government = clan_government
		#						has_government = republic_government
		#					}
		#				}
		#				change_government = administrative_government
		#			}
		#		}
		#	}
		#	#No need to further specify this
		#	else_if = {
		#		limit = {
		#			exists = holder
		#			NOT = { has_dlc_feature = roads_to_power }
		#		}
		#		holder = {
		#			change_government = feudal_government
		#		}
		#	}
		#}
		
		#Fix any christian titles stuck as clan and set Goidelic up as clan
		
		every_ruler = {
		
			if = {
				limit = {	
					has_religion = religion:christianity_religion
					NOT = {
						has_government = tribal_government
						has_government = republic_government
						has_government = theocracy_government
						has_government = holy_order_county_government
						has_government = mandala_government
						has_government = mercenary_government 
						has_government = administrative_government
						has_government = landless_adventurer_government
					}
				}
				
				#Set Goidelic up
				
				if = {
					limit = {
						NOT = { has_government = theocracy_government }
						culture = { has_cultural_pillar = heritage_goidelic }
					}
					change_government = clan_government
				}
				
				##
				
				else_if = {
					limit = {
						NOT = { has_government = mercenary_government }
						NOT = { has_government = theocracy_government }
						NOT = { has_government = landless_adventurer_government }
						NOT = { has_government = administrative_government }
						OR = {
						capital_county.title_province = { geographical_region = world_europe_west }
						capital_county.title_province = { geographical_region = world_europe_north }
						capital_county.title_province = { geographical_region = world_europe_south }
						capital_county.title_province = { geographical_region = world_europe_east }
						capital_county.title_province = { geographical_region = world_middle_east_jerusalem }
						capital_county.title_province = { geographical_region = world_asia_minor }
						}
						
					}
					change_government = feudal_government
				}
			}
		}
		
		every_ruler = {
		
			if = {
				
				#Make early Zoroastrians into Feudal
				limit = {
					has_religion = religion:zoroastrianism_religion
					NOT = {
						has_government = tribal_government
						has_government = republic_government
						has_government = theocracy_government
						has_government = holy_order_county_government
						has_government = mandala_government
						has_government = mercenary_government 
						has_government = landless_adventurer_government 

					}
				}
				change_government = feudal_government
			}
		}
		
		#Make all pagans be tribal government except the Steppe who would be nomadic
		
		every_ruler = {
			
			if = {
				limit = {
					religion = { is_in_family = rf_pagan }
					NOT = {
						has_government = republic_government
						has_government = theocracy_government
						has_government = holy_order_county_government
						has_government = mandala_government
						has_government = landless_adventurer_government 
						
						culture = culture:lithuanian
						
						OR = {
							capital_county.title_province = { geographical_region = world_steppe_west }
							capital_county.title_province = { geographical_region = world_steppe_east }
							capital_county.title_province = { geographical_region = world_steppe_tarim }
						}
					}
				}
				
				#Make Lithuania feudal if post 1258 or tribal otherwise
				
				if = {
					limit = {
						game_start_date >= 1258.1.1
						culture = culture:lithuanian
					}
					change_government = feudal_government
				}
				
				
				else_if = {
					limit = {
						game_start_date <= 1257.1.1
						culture = culture:lithuanian
					}
					change_government = tribal_government
				}

			}
		}
			
		
		
	}
}