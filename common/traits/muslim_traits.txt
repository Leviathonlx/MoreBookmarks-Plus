#Mainly to have just 1 file rather than 2 for traits from ME

drunkard = { # Substance Abuse (Alcohol)
	category = fame
	stewardship = -2
	prowess = -2
	health = -0.15
	stress_loss_mult = 0.2

	same_opinion = 10
	character_travel_safety = -10
	
	ruler_designer_cost = -10

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					NOT = { exists = this }
				}
				desc = trait_drunkard_desc
			}
			desc = trait_drunkard_character_desc
		}
	}

	ai_rationality = -10
	ai_energy = -15

	triggered_opinion = {
		parameter = me_intoxication_illegal
		opinion_modifier = me_drunkard_crime
	}

	compatibility = {
		temperate = @neg_compat_low
	}
}

# Muslim version of the Blood of the Prophet-trait. Muslim agnatically descended from Muhammed. Female version is localized 'Sayyida'
sayyid = {
	#index = 170 #Traits are no longer indexed
	category = fame
	
	ruler_designer_cost = 25
	
	name = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_sayyid
			}
			triggered_desc = {
				trigger = { is_female = yes }
				desc = trait_sayyida
			}
			desc = trait_sayyid
		}
	}

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_sayyid_desc
			}
			desc = trait_sayyid_character_desc
		}
	}

	inherit_chance = 100
	parent_inheritance_sex = male
	inherit_from_real_father = no

	triggered_opinion = { # For Sunnis, Muhakkimas, and Zanadiqa
		parameter = sayyid_bonus_normal
		opinion_modifier = sayyid_opinion_normal
	}
	triggered_opinion = { # For Shias and Batriyya
		parameter = sayyid_bonus_increased
		opinion_modifier = sayyid_opinion_increased
	}
	triggered_opinion = { # For Ghulat
		parameter = sayyid_bonus_increased_greatly
		opinion_modifier = sayyid_opinion_increased_greatly
	}

	faith_modifier = {
		parameter = sayyid_bonus_increased
		monthly_piety = 0.5
	}
	faith_modifier = {
		parameter = sayyid_bonus_increased_greatly
		monthly_piety = 1
	}

	faith_modifier = { # Only Muslims get bonuses
		parameter = islamic_trait_effects_active
		zealot_opinion = 15
		short_reign_duration_mult = -0.30
		monthly_prestige = 0.3
	}
	
	level = 2
}

quraysh = {
	#index = 1701 #Traits are no longer indexed
	category = fame
	ruler_designer_cost = 15
	name = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_qurashi
			}
			triggered_desc = {
				trigger = { is_female = yes }
				desc = trait_qurashiyya
			}
			desc = trait_qurashi
		}
	}

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_quraysh_desc
			}
			desc = trait_quraysh_character_desc
		}
	}
	
	inherit_chance = 100
	parent_inheritance_sex = male
	inherit_from_real_father = no

	faith_modifier = { # Only Muslims get bonuses
		parameter = islamic_trait_effects_active
		islam_religion_opinion = 5
		zealot_opinion = 5
		short_reign_duration_mult = -0.15
		monthly_prestige = 0.15
	}
	
	level = 1
}

# Similar to Sayyid trait but for Barghawata characters
blood_of_salih = {
	category = fame
	ruler_designer_cost = 25

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_blood_of_salih_desc
			}
			desc = trait_blood_of_salih_character_desc
		}
	}
	
	inherit_chance = 100
	parent_inheritance_sex = male
	inherit_from_real_father = no

	faith_modifier = { # Only Barghawata get bonuses
		parameter = barghawata_trait_effects_active
##		barghawata_religion_opinion = 10
		same_faith_opinion = 10
		zealot_opinion = 15
		short_reign_duration_mult = -0.30
		monthly_prestige = 0.3
	}
}
miknasa = {
	#index = 17011 #Traits are no longer indexed
	category = fame
	ruler_designer_cost = 10
	name = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_miknasa
			}
			triggered_desc = {
				trigger = { is_female = yes }
				desc = trait_miknasa
			}
			desc = trait_miknasa
		}
	}

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_miknasa_desc
			}
			desc = trait_miknasa_character_desc
		}
	}
	
	inherit_chance = 100
	parent_inheritance_sex = male
	inherit_from_real_father = no

	same_opinion = 10
	diplomacy = 1

}

masmudi = {
	#index = 17099 #Traits are no longer indexed
	category = fame
	ruler_designer_cost = 10
	name = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_masmudi
			}
			triggered_desc = {
				trigger = { is_female = yes }
				desc = trait_masmudi
			}
			desc = trait_masmudi
		}
	}

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_masmudi_desc
			}
			desc = trait_masmudi_character_desc
		}
	}
	
	inherit_chance = 100
	parent_inheritance_sex = male
	inherit_from_real_father = no

	same_opinion = 10
	stewardship = 1

}

sanhaja = {
	#index = 17092 #Traits are no longer indexed
	category = fame
	ruler_designer_cost = 10
	name = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_sanhaja
			}
			triggered_desc = {
				trigger = { is_female = yes }
				desc = trait_sanhaja
			}
			desc = trait_sanhaja
		}
	}

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_sanhaja_desc
			}
			desc = trait_sanhaja_character_desc
		}
	}
	
	inherit_chance = 100
	parent_inheritance_sex = male
	inherit_from_real_father = no

	same_opinion = 10
	learning = 1

}

zenata = {
	#index = 17094 #Traits are no longer indexed
	category = fame
	ruler_designer_cost = 10
	name = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_zenata
			}
			triggered_desc = {
				trigger = { is_female = yes }
				desc = trait_zenata
			}
			desc = trait_zenata
		}
	}

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = trait_zenata_desc
			}
			desc = trait_zenata_character_desc
		}
	}
	
	inherit_chance = 100
	parent_inheritance_sex = male
	inherit_from_real_father = no

	same_opinion = 10
	martial = 1

}


hafidh = {
	category = lifestyle
	ruler_designer_cost = 40

	icon = {
		first_valid = {
			triggered_desc = {
				trigger = { NOT = { exists = this } }
				desc = hafidh.dds
			}
			triggered_desc = {
				trigger = {
					has_trait_xp = {
						trait = hafidh
						value <= 99
					}
				}
				desc = hafidh.dds
			}
			triggered_desc = {
				trigger = {
					has_trait_xp = {
						trait = hafidh
						value >= 30
					}
				}
				desc = true_hafidh.dds
			}
			desc = hafidh.dds
		}
	}
	
	track = {
		30 = {	
			learning = 1
			faith_modifier = {
				parameter = islamic_trait_effects_active
				monthly_piety_gain_mult = 0.05
				zealot_opinion = 5

				ai_zeal = 10
			}		
		}
		65 = {
			learning = 1
			faith_modifier = {
				parameter = islamic_trait_effects_active
				monthly_piety_gain_mult = 0.05
				stress_loss_mult = 0.05
				islam_religion_opinion = 5
				zealot_opinion = 5

				ai_zeal = 10
			}
		}
		100 = {
			learning = 1
			faith_modifier = {
				parameter = islamic_trait_effects_active
				monthly_piety_gain_mult = 0.1
				stress_loss_mult = 0.1
				islam_religion_opinion = 5
				zealot_opinion = 5

				ai_zeal = 20
			}
		}
	}
	
	### Localization ###
	# Arabs pronounce it as Hafidh/Hafidha, while Non-Arabs pronounce it as Hafiz/Hafiza
	name = {
		first_valid = {
			#True Hafidh
			triggered_desc = {
				trigger = {
					is_male = yes
					culture = { has_cultural_pillar = language_arabic }
					has_trait_xp = {
						trait = hafidh
						value >= 100
					}
				}
				desc = trait_hafidh_3
			}
			#True Hafidha
			triggered_desc = {
				trigger = {
					is_female = yes
					culture = { has_cultural_pillar = language_arabic }
					has_trait_xp = {
						trait = hafidh
						value >= 100
					}
				}
				desc = trait_hafidha_3
			}
			#True Hafiz
			triggered_desc = {
				trigger = {
					is_male = yes
					NOT = { culture = { has_cultural_pillar = language_arabic } }
					has_trait_xp = {
						trait = hafidh
						value >= 100
					}
				}
				desc = trait_hafiz_3
			}
			#True Hafiza
			triggered_desc = {
				trigger = {
					is_female = yes
					NOT = { culture = { has_cultural_pillar = language_arabic } }
					has_trait_xp = {
						trait = hafidh
						value >= 100
					}
				}
				desc = trait_hafiza_3
			}

			#Experienced Hafidh
			triggered_desc = {
				trigger = { 
					is_male = yes
					culture = { has_cultural_pillar = language_arabic }
					has_trait_xp = {
						trait = hafidh
						value >= 65
					}
				}
				desc = trait_hafidh_2
			}
			#Experienced Hafidha
			triggered_desc = {
				trigger = { 
					is_female = yes
					culture = { has_cultural_pillar = language_arabic }
					has_trait_xp = {
						trait = hafidh
						value >= 65
					}
				}
				desc = trait_hafidha_2
			}
			#Experienced Hafiz
			triggered_desc = {
				trigger = { 
					is_male = yes
					NOT = { culture = { has_cultural_pillar = language_arabic } }
					has_trait_xp = {
						trait = hafidh
						value >= 65
					}
				}
				desc = trait_hafiz_2
			}

			#Experienced Hafiza
			triggered_desc = {
				trigger = { 
					is_female = yes
					NOT = { culture = { has_cultural_pillar = language_arabic } }
					has_trait_xp = {
						trait = hafidh
						value >= 65
					}
				}
				desc = trait_hafiza_2
			}

			#Aspiring Hafidh
			triggered_desc = {
				trigger = { 
					is_male = yes
					culture = { has_cultural_pillar = language_arabic }
					has_trait_xp = {
						trait = hafidh
						value <= 64
					}
				}
				desc = trait_hafidh_1
			}
			#Aspiring Hafidha
			triggered_desc = {
				trigger = { 
					is_female = yes
					culture = { has_cultural_pillar = language_arabic }
					has_trait_xp = {
						trait = hafidh
						value <= 64
					}
				}
				desc = trait_hafidha_1
			}
			#Aspiring Hafiz
			triggered_desc = {
				trigger = { 
					is_male = yes
					NOT = { culture = { has_cultural_pillar = language_arabic } }
					has_trait_xp = {
						trait = hafidh
						value <= 64
					}
				}
				desc = trait_hafiz_1
			}
			#Aspiring Hafiza
			triggered_desc = {
				trigger = { 
					is_female = yes
					NOT = { culture = { has_cultural_pillar = language_arabic } }
					has_trait_xp = {
						trait = hafidh
						value <= 64
					}
				}
				desc = trait_hafiza_1
			}
			#Hafiz
			desc = trait_hafidh
		}
	}

	# Loc
	desc = {
		first_valid = {
			#The trait can never go higher than the first level if it's not assigned to a character
			triggered_desc = {
				trigger = { 
					NOT = { exists = this } 
				}
				desc = trait_hafidh_desc
			}
			triggered_desc = {
				trigger = { 
					has_trait_xp = {
						trait = hafidh
						value >= 100
					}
					OR = {
						faith = faith:quranist
						faith = faith:nazzamism 
					}
				}
				desc = trait_hafidh_3_character_quranist_desc
			}
			triggered_desc = {
				trigger = { 
					has_trait_xp = {
						trait = hafidh
						value >= 100
					}
		   
								
								 
	  
				}
				desc = trait_hafidh_3_character_normal_desc
			}
			triggered_desc = {
				trigger = { 
					has_trait_xp = {
						trait = hafidh
						value >= 65
					}
					OR = {
						faith = faith:quranist
						faith = faith:nazzamism 
					}
				}
				desc = trait_hafidh_2_character_quranist_desc
			}
			triggered_desc = {
				trigger = { 
					has_trait_xp = {
						trait = hafidh
						value >= 65
					}
		   
								
								 
	  
				}
				desc = trait_hafidh_2_character_normal_desc
			}
			triggered_desc = {
				trigger = { 
					has_trait_xp = {
						trait = hafidh
						value >= 30
					}
					OR = {
						faith = faith:quranist
						faith = faith:nazzamism 
					}
				}
				desc = trait_hafidh_1_character_quranist_desc
			}
			triggered_desc = {
				trigger = { 
					has_trait_xp = {
						trait = hafidh
						value >= 30
					}
		   
								
								 
	  
				}
				desc = trait_hafidh_1_character_normal_desc
			}
			desc = trait_hafidh_character_desc
		}
	}


	compatibility = {
		whole_of_body = @pos_compat_medium
		scholar = @pos_compat_medium
		theologian = @pos_compat_medium
		intellect_good_1 = @pos_compat_low
		intellect_good_2 = @pos_compat_low
		intellect_good_3 = @pos_compat_low
		pensive = @pos_compat_low
		shrewd = @pos_compat_low
		diligent = @pos_compat_low
		lazy = @neg_compat_low
		intellect_bad_1 = @neg_compat_low
		intellect_bad_2 = @neg_compat_low
		intellect_bad_3 = @neg_compat_low
	}
}


